[gd_scene load_steps=22 format=3 uid="uid://cuv4vme4rwno0"]

[ext_resource type="Script" path="res://scripts/game_manager.gd" id="1_l4ihi"]
[ext_resource type="PackedScene" uid="uid://dqnaqj8yb6hwd" path="res://scenes/player.tscn" id="1_rbmkf"]
[ext_resource type="Texture2D" uid="uid://c265s82scq482" path="res://assets/sprites/background.png" id="3_1q0p7"]
[ext_resource type="Texture2D" uid="uid://dbxmhmrik75ch" path="res://assets/sprites/platform.png" id="3_en8fe"]
[ext_resource type="PackedScene" uid="uid://pqp5qaw561fr" path="res://scenes/point.tscn" id="4_28cek"]
[ext_resource type="FontFile" uid="uid://cp5kpkkmrmdob" path="res://assets/fonts/monogram.ttf" id="5_f1ggy"]
[ext_resource type="Script" path="res://scripts/level.gd" id="5_odm52"]
[ext_resource type="PackedScene" uid="uid://dtrbka1ef726o" path="res://scenes/killzone.tscn" id="5_x8euu"]
[ext_resource type="PackedScene" uid="uid://kjhh6jp8711k" path="res://chunks/chunk1.tscn" id="6_xxir6"]
[ext_resource type="PackedScene" uid="uid://8sv84xrsny2w" path="res://chunks/chunk2.tscn" id="7_0yfv7"]
[ext_resource type="PackedScene" uid="uid://coggo3hft207q" path="res://chunks/chunk10.tscn" id="12_gmtm4"]
[ext_resource type="PackedScene" uid="uid://ce4sdtmb3agcb" path="res://scenes/death_wall.tscn" id="15_3acr7"]
[ext_resource type="PackedScene" uid="uid://m7blgj87figg" path="res://chunks/chunk4.tscn" id="15_4fvyx"]
[ext_resource type="PackedScene" uid="uid://c8d7il10e1a0r" path="res://chunks/chunk5.tscn" id="16_fk7dl"]
[ext_resource type="PackedScene" uid="uid://drb4231ffjelh" path="res://chunks/chunk6.tscn" id="17_bv6hy"]
[ext_resource type="PackedScene" uid="uid://bj7b5m8icjvcv" path="res://chunks/chunk7.tscn" id="18_2ieol"]
[ext_resource type="PackedScene" uid="uid://c72y3gr62dnyy" path="res://chunks/chunk8.tscn" id="19_xw086"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_gd52p"]
texture = ExtResource("3_en8fe")
0:0/0 = 0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_48v1b"]
texture = ExtResource("3_1q0p7")
0:0/size_in_atlas = Vector2i(2, 2)
0:0/0 = 0

[sub_resource type="TileSet" id="TileSet_wvtw0"]
physics_layer_0/collision_layer = 1
sources/0 = SubResource("TileSetAtlasSource_gd52p")
sources/2 = SubResource("TileSetAtlasSource_48v1b")

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_cn5tm"]

[node name="Game" type="Node2D"]
metadata/_edit_vertical_guides_ = [97.0, 58.0]
metadata/_edit_horizontal_guides_ = [-41.0, -76.0]

[node name="EndGameScreen" type="CanvasLayer" parent="."]
layer = 100

[node name="Message" type="Label" parent="EndGameScreen"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -37.5
offset_top = -20.5
offset_right = 37.5
offset_bottom = 20.5
grow_horizontal = 2
grow_vertical = 2
theme_override_fonts/font = ExtResource("5_f1ggy")
theme_override_font_sizes/font_size = 50
text = "Test
"
horizontal_alignment = 1
vertical_alignment = 1

[node name="PlayAgain" type="Button" parent="EndGameScreen"]
process_mode = 3
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -44.0
offset_top = 36.0
offset_right = 44.0
offset_bottom = 67.0
grow_horizontal = 2
grow_vertical = 2
mouse_force_pass_scroll_events = false
text = "Play Again"
icon_alignment = 1

[node name="GameManager" type="Node" parent="."]
unique_name_in_owner = true
script = ExtResource("1_l4ihi")

[node name="ScoreLabel" type="Label" parent="GameManager"]
offset_left = -98.0
offset_top = 40.0
offset_right = 7.0
offset_bottom = 59.0
theme_override_colors/font_color = Color(0.0980392, 0.313726, 0.752941, 1)
theme_override_fonts/font = ExtResource("5_f1ggy")
text = "score: "
horizontal_alignment = 1
autowrap_mode = 2
metadata/_edit_use_anchors_ = true

[node name="TileMapLayer" type="TileMapLayer" parent="."]
tile_set = SubResource("TileSet_wvtw0")

[node name="Player" parent="." instance=ExtResource("1_rbmkf")]
position = Vector2(16, -15)

[node name="Camera2D" type="Camera2D" parent="Player"]
position = Vector2(0, -7)
zoom = Vector2(3, 3)
limit_bottom = 120
limit_smoothed = true
position_smoothing_enabled = true

[node name="MultiplayerHUD" type="Control" parent="Player/Camera2D"]
unique_name_in_owner = true
layout_mode = 3
anchors_preset = 0
offset_left = -132.0
offset_top = -80.0
offset_right = -93.0
offset_bottom = -45.0

[node name="VBoxContainer" type="VBoxContainer" parent="Player/Camera2D/MultiplayerHUD"]
layout_mode = 0
offset_left = 7.0
offset_top = 10.0
offset_right = 39.0
offset_bottom = 56.0
mouse_filter = 0

[node name="host" type="Button" parent="Player/Camera2D/MultiplayerHUD/VBoxContainer"]
layout_mode = 2
theme_override_fonts/font = ExtResource("5_f1ggy")
text = "host"

[node name="join" type="Button" parent="Player/Camera2D/MultiplayerHUD/VBoxContainer"]
layout_mode = 2
theme_override_fonts/font = ExtResource("5_f1ggy")
text = "join"

[node name="Killzone" parent="." instance=ExtResource("5_x8euu")]
position = Vector2(74, 141)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Killzone"]
shape = SubResource("WorldBoundaryShape2D_cn5tm")
disabled = true

[node name="Points" type="Node" parent="."]

[node name="Point" parent="Points" instance=ExtResource("4_28cek")]
position = Vector2(183, -9)

[node name="Point4" parent="Points" instance=ExtResource("4_28cek")]
position = Vector2(-168, 25)

[node name="Point8" parent="Points" instance=ExtResource("4_28cek")]
position = Vector2(-296, 57)

[node name="Platforms" type="Node" parent="."]

[node name="Enemies" type="Node" parent="."]

[node name="Labels" type="Node" parent="."]

[node name="MultiplayerSpawner" type="MultiplayerSpawner" parent="."]
_spawnable_scenes = PackedStringArray("res://scenes/multiplayer_player.tscn")
spawn_path = NodePath("../Players")
spawn_limit = 10

[node name="Players" type="Node2D" parent="."]
position = Vector2(-8, -15)

[node name="level" type="Node2D" parent="."]
position = Vector2(3, 0)
script = ExtResource("5_odm52")
chunks = Array[PackedScene]([ExtResource("6_xxir6"), ExtResource("7_0yfv7"), ExtResource("12_gmtm4"), ExtResource("15_4fvyx"), ExtResource("16_fk7dl"), ExtResource("17_bv6hy"), ExtResource("18_2ieol"), ExtResource("19_xw086")])

[node name="DeathWallNode" parent="." instance=ExtResource("15_3acr7")]
position = Vector2(-277, 94)

[connection signal="pressed" from="EndGameScreen/PlayAgain" to="GameManager" method="play_again"]
[connection signal="pressed" from="Player/Camera2D/MultiplayerHUD/VBoxContainer/host" to="GameManager" method="host"]
[connection signal="pressed" from="Player/Camera2D/MultiplayerHUD/VBoxContainer/join" to="GameManager" method="join"]
